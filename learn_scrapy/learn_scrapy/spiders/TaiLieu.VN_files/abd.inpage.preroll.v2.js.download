//2019-02-26 15:13
var Prot=(document.location.protocol=='https:')?'https://ambient.cachefly.net':'http://'+abd_media;var adbmedia=Prot+'/assets/';var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b="";var c,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;a=Base64._utf8_encode(a);while(i<a.length){c=a.charCodeAt(i++);chr2=a.charCodeAt(i++);chr3=a.charCodeAt(i++);enc1=c>>2;enc2=((c&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}b=b+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4)}return b},decode:function(a){var b="";var c,chr2,chr3;var d,enc2,enc3,enc4;var i=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<a.length){d=this._keyStr.indexOf(a.charAt(i++));enc2=this._keyStr.indexOf(a.charAt(i++));enc3=this._keyStr.indexOf(a.charAt(i++));enc4=this._keyStr.indexOf(a.charAt(i++));c=(d<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;b=b+String.fromCharCode(c);if(enc3!=64){b=b+String.fromCharCode(chr2)}if(enc4!=64){b=b+String.fromCharCode(chr3)}}b=Base64._utf8_decode(b);return b},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");var b="";for(var n=0;n<a.length;n++){var c=a.charCodeAt(n);if(c<128){b+=String.fromCharCode(c)}else if((c>127)&&(c<2048)){b+=String.fromCharCode((c>>6)|192);b+=String.fromCharCode((c&63)|128)}else{b+=String.fromCharCode((c>>12)|224);b+=String.fromCharCode(((c>>6)&63)|128);b+=String.fromCharCode((c&63)|128)}}return b},_utf8_decode:function(a){var b="";var i=0;var c=c1=c2=0;while(i<a.length){c=a.charCodeAt(i);if(c<128){b+=String.fromCharCode(c);i++}else if((c>191)&&(c<224)){c2=a.charCodeAt(i+1);b+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2}else{c2=a.charCodeAt(i+1);c3=a.charCodeAt(i+2);b+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3}}return b}};var adReady=false;var val_if;var http=document.location.protocol;var cb=Math.floor((Math.random()*100000)+1);var abd_vast=http+"//delivery.adnetwork.vn/247/xmlvideoad/wid_"+abd_wid+"/zid_"+abd_zid+"/type_inline/eff_vidinpage/cb_"+cb;var tracking_request=0;var abdwrapper;var checkVisible=true;function posY(a){var b=a,top=0;while(!!b&&b.tagName.toLowerCase()!=="body"){top+=b.offsetTop;b=b.offsetParent}return top};function viewPortHeight(){var a=document.documentElement;if(!!window.innerWidth){return window.innerHeight}else if(a&&!isNaN(a.clientHeight)){return a.clientHeight}return 0};function scrollY(){if(window.pageYOffset){return window.pageYOffset}return Math.max(document.documentElement.scrollTop,document.body.scrollTop)};function checkvisible_vi(a){var b=viewPortHeight(),st=scrollY(),y=posY(a);h=a.clientHeight;ybottom=y+h;h_vib=h;try{val_if=document.getElementById("ifvideoinpage").contentWindow;if((y>st-h_vib)&&(y<(st+b))&&(ybottom>st)&&(ybottom<(st+b)+h_vib)){if(adReady==false){val_if.postMessage({func_type:'abdPlay'},"*")}popupControl("hide");val_if.postMessage({func_type:'abdResize',param1:abd_width,param2:abd_height},"*")}else{popupControl("show");val_if.postMessage({func_type:'abdResize',param1:abd_width,param2:abd_height},"*")}}catch(err){}};function popupControl(a){if(adReady==true){var w=abd_width;var h=abd_height;if(a=="show"){try{if(abd_popup===undefined)abd_popup=true}catch(e){abd_popup=true}console.log(abd_popup);if(abd_popup==false)return;w=abd_width;h=abd_height;document.getElementById('AbdVideoInPagePlayer').style="position: fixed; width: "+w+"px; height: "+h+"px; left: 0; bottom: 0; z-index:2147483647 !important;  overflow: hidden;";document.getElementById("ifvideoinpage").style="width: "+abd_width+"px; height: "+abd_height+"px;"}else if(a=="hide"){w=abd_width;h=abd_height;document.getElementById("AbdVideoInPagePlayer").style="height: "+h+"px; overflow: hidden;";document.getElementById("ifvideoinpage").style="width: "+w+"px; height: "+h+"px;"}}}function injectElementId(){abd_content_id=abd_content_id.replace("#","");var a=document.getElementById(abd_content_id).getElementsByTagName("p");abd_div_tag='p';if(a.length==0){a=document.getElementById(abd_content_id).getElementsByTagName("div");abd_div_tag='div'}for(i=0;i<a.length;i++){if(i==abd_position){var b=document.createElement('div');b.id="AbdVideoInPagePlayerWrapper";document.getElementById(abd_content_id).getElementsByTagName(abd_div_tag)[abd_position].appendChild(b);break}}};function injectElementClass(){abd_content_id=abd_content_id.replace(".","");var a=document.getElementsByClassName(abd_content_id)[0].getElementsByTagName("p");abd_div_tag='p';if(a.length==0){a=document.getElementsByClassName(abd_content_id)[0].getElementsByTagName("div");abd_div_tag='div'}for(i=0;i<a.length;i++){if(i==abd_position){var b=document.createElement('div');b.id="AbdVideoInPagePlayerWrapper";document.getElementsByClassName(abd_content_id)[0].getElementsByTagName(abd_div_tag)[abd_position].appendChild(b);break}}};function loadVideoInpagePlayer(){var a=Base64.encode(window.location.href);abd_vast=abd_vast+'/w_'+abd_width+'/h_'+abd_height+'/purl_'+encodeURIComponent(a);src=adbmedia+"player/jwp722/videoinpage-player-jwp722.html?flash=false&volume=30&autoStart=false&skipAd="+abd_skip+"&tag="+encodeURIComponent(abd_vast)+"&media_path="+encodeURIComponent(adbmedia)+"&w="+abd_width+"&h="+abd_height;document.getElementById('AbdVideoInPagePlayerWrapper').innerHTML="<div id='AbdVideoInPagePlayer'><iframe id='ifvideoinpage' src='"+src+"' style='border:0;width:"+abd_width+"px;height:"+abd_height+"px' frameborder='0' scrolling='no' allowfullscreen></iframe></div>"}function loadVideoInpageInit(){if(document.getElementById('AbdVideoInPagePlayerWrapper')==null){setTimeout("loadVideoInpageInit();",500)}else{abdwrapper=document.getElementById('AbdVideoInPagePlayerWrapper');loadVideoInpagePlayer();abdwrapper.style.height="0px";abdwrapper.style.overflow="hidden";window.onscroll=function(e){if(checkVisible){checkvisible_vi(abdwrapper)}};window.addEventListener('message',function(a){data=a.data;if(data.func_type=='abdShowVideoInpagePlayer'){abdwrapper.style.width=data.param1;abdwrapper.style.height=data.param2;document.getElementById('AbdVideoInPagePlayer').style.width=data.param1;document.getElementById('AbdVideoInPagePlayer').style.height=data.param2;adReady=true};if(data.func_type=='abdCloseVideoInpagePlayer'){checkVisible=false;abdwrapper.parentNode.removeChild(abdwrapper)}},false)}};window.addEventListener('load',function(){console.log("inject");id=abd_content_id.substr(0,1);if(id=="#")injectElementId();else injectElementClass();loadVideoInpageInit()},true);